# 空间规划政策爬虫系统 - 打包说明

## 版本信息
- **当前版本**: v1.1.1
- **打包工具**: PyInstaller
- **Python版本**: 3.7+

## 打包脚本说明

### 1. 打包脚本.bat (推荐)
- **用途**: 标准打包流程
- **特点**: 简单易用，适合大多数情况
- **输出**: 单个exe文件

### 2. 高级打包脚本.bat
- **用途**: 高级打包配置
- **特点**: 包含更多依赖库，兼容性更好
- **输出**: 单个exe文件
- **适用场景**: 遇到依赖问题时使用

### 3. 清理打包文件.bat
- **用途**: 清理打包产生的临时文件
- **清理内容**: build目录、__pycache__、.spec文件等

## 打包步骤

### 方法一：使用标准打包脚本
1. 双击运行 `打包脚本.bat`
2. 等待打包完成
3. 在 `dist` 目录中找到可执行文件

### 方法二：使用高级打包脚本
1. 双击运行 `高级打包脚本.bat`
2. 等待打包完成
3. 在 `dist` 目录中找到可执行文件

### 方法三：手动打包
```bash
# 激活虚拟环境
venv\Scripts\activate

# 安装依赖
pip install -r requirements.txt
pip install pyinstaller

# 打包
pyinstaller --onefile --windowed --icon=docs/icon.ico --name="空间规划政策爬虫系统" src/space_planning/main.py
```

## 打包后文件说明

### 输出文件
- `dist/空间规划政策爬虫系统.exe` - 主程序
- `dist/` 目录 - 包含所有运行所需文件

### 数据库位置
- **打包前**: 源码目录
- **打包后**: 用户文档目录 (`%USERPROFILE%\Documents\空间规划政策爬虫系统\`)

## 版本更新记录

### v1.1.1 (当前版本)
- ✅ 修复数据库路径问题
- ✅ 解决打包后无法爬取的问题
- ✅ 增强网络环境兼容性
- ✅ 添加诊断工具
- ✅ 改进错误处理

### v1.1.0
- ✅ 基础功能实现
- ✅ 基本打包支持

## 常见问题解决

### 1. 打包失败
**问题**: 打包过程中出现错误
**解决**:
- 检查Python版本是否为3.7+
- 确保网络连接正常
- 尝试使用高级打包脚本
- 清理临时文件后重新打包

### 2. 打包后无法运行
**问题**: exe文件无法启动
**解决**:
- 检查是否被杀毒软件拦截
- 确保目标电脑有足够的权限
- 尝试以管理员身份运行

### 3. 打包后无法爬取
**问题**: 程序能打开但无法爬取数据
**解决**:
- 检查网络连接
- 确认数据库路径正确
- 使用程序内置的诊断工具

### 4. 文件过大
**问题**: 打包后的文件体积过大
**解决**:
- 使用 `--onefile` 参数打包为单个文件
- 清理不必要的依赖
- 使用UPX压缩（高级打包脚本已启用）

## 部署说明

### 单机部署
1. 将 `dist` 目录复制到目标电脑
2. 运行 `空间规划政策爬虫系统.exe`
3. 程序会自动创建数据库和配置文件

### 网络部署
1. 将程序放在网络共享目录
2. 用户通过网络访问运行
3. 注意数据库路径权限问题

## 注意事项

1. **虚拟环境**: 打包时使用虚拟环境，避免依赖冲突
2. **图标文件**: 确保 `docs/icon.ico` 文件存在
3. **权限问题**: 某些功能可能需要管理员权限
4. **网络环境**: 确保目标环境能访问互联网
5. **数据库**: 数据库文件会自动创建在用户文档目录

## 技术支持

如遇到问题，请：
1. 查看程序内置的诊断工具
2. 检查错误日志
3. 确认系统环境要求
4. 联系技术支持

---
*最后更新: 2024年* 